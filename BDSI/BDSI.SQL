
-- Tabela USUARIO
CREATE TABLE USUARIO (
    Cpf VARCHAR(11) NOT NULL,
    Pnome VARCHAR(80) NOT NULL,
    Unome VARCHAR(80) NOT NULL,
    EMAIL VARCHAR(80) NOT NULL,
    Senha VARCHAR(16) NOT NULL
);

-- Tabela CARTEIRA
CREATE TABLE CARTEIRA(
    Id INTEGER NOT NULL,
    Valor DOUBLE PRECISION NOT NULL DEFAULT 0,
    Usuario VARCHAR(11) NOT NULL
);

-- Tabela METODOPAGAMENTO
CREATE TABLE METODOPAGAMENTO(
    Id INTEGER NOT NULL,
    Carteira INTEGER NOT NULL,
    TipoPgmt VARCHAR(100) NOT NULL
);

-- Tabela INVESTIMENTO
CREATE TABLE INVESTIMENTO(
    Id INTEGER NOT NULL,
    Usuario VARCHAR(11) NOT NULL,
    Tipo VARCHAR(20) NOT NULL,
    Valor DOUBLE PRECISION NOT NULL,
    Nmr_Transacao INTEGER NOT NULL,
    Dt_Transacao DATE NOT NULL 
);

-- Constraints

ALTER TABLE USUARIO ADD CONSTRAINT PK_USUARIO PRIMARY KEY (Cpf);
ALTER TABLE CARTEIRA ADD CONSTRAINT PK_CARTEIRA PRIMARY KEY (Id);
ALTER TABLE METODOPAGAMENTO ADD CONSTRAINT PK_METODOPAGAMENTO PRIMARY KEY (Id, Carteira);
ALTER TABLE INVESTIMENTO ADD CONSTRAINT PK_INVESTIMENTO PRIMARY KEY (Id);
ALTER TABLE CARTEIRA ADD CONSTRAINT FK_CARTEIRA_USUARIO FOREIGN KEY (Usuario) REFERENCES USUARIO (Cpf) ON DELETE RESTRICT ON UPDATE CASCADE;
ALTER TABLE INVESTIMENTO ADD CONSTRAINT FK_INVESTIMENTO_USUARIO FOREIGN KEY (Usuario) REFERENCES USUARIO (Cpf) ON DELETE RESTRICT ON UPDATE CASCADE;
ALTER TABLE METODOPAGAMENTO ADD CONSTRAINT FK_METODOPAGAMENTO_CARTEIRA FOREIGN KEY (Carteira) REFERENCES CARTEIRA (Id) ON DELETE RESTRICT ON UPDATE CASCADE;